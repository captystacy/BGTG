@section Scripts {
    <script src="~/js/calendar-plan.js" asp-append-version="true"></script>
    <script src="~/js/duration-by-tcp.js" asp-append-version="true"></script>
}

<div id="pos">
    <ul class="nav nav-tabs">
        <li class="nav-item">
            <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#estimate-calculations" type="button">Сметные расчеты</button>
        </li>
        <li class="nav-item">
            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#duration-by-tcp" type="button">Продолжительность по ТКП</button>
        </li>
    </ul>
    <div class="tab-content mt-2">
        <div class="tab-pane fade show active" id="estimate-calculations">
            <form asp-controller="Pos" method="post" enctype="multipart/form-data">
                <div class="mb-3" id="choose-estimates">
                    <label for="estimate-files" class="form-label">Выберите сметы</label>
                    <div class="spinner-border spinner-border-sm text-primary" id="spinner" style="display: none;">
                    </div>
                    <input name="estimateFiles" class="form-control" type="file" accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" id="estimate-files" multiple>
                </div>
                <div class="row mb-3">
                    <div class="col">
                        <div class="btn-group">
                            <button asp-action="DownloadDurationByLaborCosts" type="submit" class="btn btn-primary" id="duration-by-labor-costs-btn" disabled>Продолжительность</button>
                            <button type="button" class="btn btn-primary dropdown-toggle dropdown-toggle-split" data-bs-toggle="dropdown">
                                <span class="visually-hidden"></span>
                            </button>
                            <div class="dropdown-menu" id="labor-costs-duration-dropdown" style="width: 361px;">
                                <div class="d-flex align-items-center px-1">
                                    <input name="NumberOfWorkingDays" class="form-control me-2" style="width: 81px;" id="number-of-working-days" type="number" value="21.5" />
                                    <label for="number-of-working-days">Количество рабочих дней в месяце</label>
                                </div>
                                <hr class="dropdown-divider">
                                <div class="d-flex align-items-center px-1">
                                    <input name="WorkingDayDuration" class="form-control me-2" style="width: 81px;" id="working-day-duration" type="number" value="8" />
                                    <label for="working-day-duration">Продолжительность рабочего дня, часов</label>
                                </div>
                                <hr class="dropdown-divider">
                                <div class="d-flex align-items-center px-1">
                                    <input name="Shift" class="form-control me-2" style="width: 81px;" id="shift" type="number" value="1.5" />
                                    <label for="shift">Сменность</label>
                                </div>
                                <hr class="dropdown-divider">
                                <div class="d-flex align-items-center px-1">
                                    <input name="NumberOfEmployees" class="form-control me-2" style="width: 81px;" id="number-of-employees" type="number" value="4" />
                                    <label for="number-of-employees">Количество работающих в бригаде </label>
                                </div>
                                <hr class="dropdown-divider">
                                <div class="d-flex align-items-center px-1">
                                    <input name="TechnologicalLaborCosts" class="form-control me-2" style="width: 81px;" id="technological-labor-costs" type="number" value="0" />
                                    <label for="technological-labor-costs">Трудозатраты по технологической карте, человеко/часов</label>
                                </div>
                                <hr class="dropdown-divider">
                                <div class="d-flex align-items-center px-1 form-check form-switch" style="padding-left: 3.3rem !important;">
                                    <input name="AcceptanceTimeIncluded" class="form-check-input me-3" style="transform: scale(1.5);" type="checkbox" id="acceptance-time-included" value="true" checked>
                                    <label class="form-check-label" for="acceptance-time-included">Включать время на приемку</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="d-flex justify-content-center">
                            <div class="btn-group">
                                <button type="button" class="btn btn-primary" id="calendar-plan-btn" disabled>
                                    Календарный план
                                </button>
                                <button type="button" class="btn btn-primary dropdown-toggle dropdown-toggle-split" data-bs-toggle="dropdown">
                                    <span class="visually-hidden"></span>
                                </button>
                                <div class="dropdown-menu ps-2" id="calendar-plan-total-work-chapters" style="width: 250px;">
                                    <div class="form-check mb-2">
                                        <input class="form-check-input" style="transform: scale(1.5);" type="radio" name="exampleRadios" id="main-total-work-1-to-9-chapter" value="9">
                                        <label class="form-check-label" for="main-total-work-1-to-9-chapter">
                                            Итого по главам 1-9
                                        </label>
                                    </div>
                                    <div class="form-check mb-2">
                                        <input class="form-check-input" style="transform: scale(1.5);" type="radio" name="exampleRadios" id="main-total-work-1-to-11-chapter" value="11">
                                        <label class="form-check-label" for="main-total-work-1-to-11-chapter">
                                            Итого по главам 1-11
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" style="transform: scale(1.5);" type="radio" name="exampleRadios" id="main-total-work-1-to-12-chapter" value="12" checked>
                                        <label class="form-check-label" for="main-total-work-1-to-12-chapter">
                                            Итого по последней сточке
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="float-end">
                            <button asp-action="downloadEnergyAndWater" type="submit" class="btn btn-primary" id="energy-and-water-btn" disabled>
                                Энергия и вода
                            </button>
                        </div>
                    </div>
                </div>
                <div class="flex-column mb-3" id="calendar-plan-failures" style="display: none;">
                    <div class="mb-1" id="construction-start-date-failure" style="display: none;">
                        <div class="text-danger me-1">
                            Что-то не так с датой начала строительства. Указать дату:
                        </div>
                        <input class="form-control form-control-sm" style="flex: 0 1 200px;" min="1900-01" type="month" />
                    </div>
                    <div id="construction-duration-failure" style="display: none;">
                        <div class="text-danger me-1">
                            Что-то не так с продолжительностью строительства. Указать продолжительность:
                        </div>
                        <input class="form-control form-control-sm" style="flex: 0 1 200px;" min="1" max="21" type="number" />
                    </div>
                </div>
            </form>
            <div id="percentages-table" class="overflow-auto mb-3" style="display: none;">
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th rowspan="3" scope="col" class="align-middle text-center">Наименование отдельных зданий, сооружений и видов работ</th>
                            <th colspan="22" scope="col" class="align-middle text-center">
                                Распределение капитальных вложений и обьемов СМР по месяцам строительства, тыс.руб.
                            </th>
                        </tr>
                        <tr id="month-row">
                        </tr>
                        <tr id="column-percents-row">
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>
            <div class="justify-content-between" style="display: none;" id="calendar-plan-btns">
                <button type="button" class="btn btn-primary" id="calculate-percentages">
                    Рассчитать задел
                    <i class="bi bi-percent"></i>
                </button>
                <button type="button" class="btn btn-primary" id="download-calendar-plan-btn">
                    Скачать
                    <i class="bi bi-download"></i>
                </button>
            </div>
        </div>
        <div class="tab-pane fade" id="duration-by-tcp">
            <form asp-controller="Pos" asp-action="DownloadDurationByTCP">
                <select name="AppendixKey" class="form-select mb-3" id="appendix">
                    <option selected disabled>Выберите нормы</option>
                    <option value="A">Нормы продолжительности строительства городских инженерных сетей и сооружений</option>
                    <option value="B">Нормы продолжительности строительства объектов коммунального хозяйства</option>
                </select>
                <select name="PipelineCategoryName" class="form-select mb-3" id="appendix-category" disabled>
                    <option selected disabled>Выберите объект</option>
                </select>
                <select name="PipelineMaterial" class="form-select mb-3" id="component-material" disabled>
                    <option selected disabled>Выберите материал</option>
                </select>
                <div class="row">
                    <div class="col">
                        <div class="input-group mb-3">
                            <span class="input-group-text">Диаметр турбопровода, мм</span>
                            <input name="PipelineDiameter" type="number" id="pipeline-diameter" min="0" class="form-control" disabled>
                        </div>
                    </div>
                    <div class="col">
                        <div class="input-group mb-3">
                            <span class="input-group-text">Длина трубопровода, км</span>
                            <input name="PipelineLength" type="number" id="pipeline-length" min="0" step="any" class="form-control" disabled>
                        </div>
                    </div>
                </div>
                <div class="float-end">
                    <button type="submit" id="download-duration-by-tcp-btn" class="btn btn-primary" disabled>
                        Скачать
                        <i class="bi bi-download"></i>
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>